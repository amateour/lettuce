!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["@amateury/lettuce"]=t():e["@amateury/lettuce"]=t()}(self,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){return"number"==typeof e}function r(e){return"boolean"==typeof e}e.r(t),e.d(t,{default:()=>S,parserScheme:()=>O});var o=new Map;o.set("Array",(function(e){return Array.isArray(e)})),o.set("String",(function(e){return"string"==typeof e})),o.set("Number",n),o.set("Object",(function(e){return e instanceof Object})),o.set("Boolean",r),o.set("MyNumberType",n);function u(e,t){return n=this,r=void 0,u=function(){var n,r,o,u,i,c;return function(e,t){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(a){switch(a.label){case 0:n=Object.keys(e),r=n.length+1,a.label=1;case 1:return--r?(o=n.length-r,u=n[o],i=e[u],[4,t({value:i,key:u,thing:e,index:o,len:r})]):[3,3];case 2:return void 0!==(c=a.sent())?[2,c]:[3,1];case 3:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function i(e){try{a(u.next(e))}catch(e){t(e)}}function c(e){try{a(u.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(i,c)}a((u=u.apply(n,r||[])).next())}));var n,r,o,u}function i(e){var t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}var c,a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},s=function(e,t,n,r){return new(n||(n=Promise))((function(o,u){function i(e){try{a(r.next(e))}catch(e){u(e)}}function c(e){try{a(r.throw(e))}catch(e){u(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};!function(e){e.type="type",e.min="min",e.max="max",e.required="required",e.regex="regex"}(c||(c={}));var f=function(e){throw e},v=function(e,t){return s(void 0,void 0,void 0,(function(){return l(this,(function(n){return!e||t||r(t)||f(c.required),[2]}))}))},h=function(e,t){return s(void 0,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.__validate__(e)];case 1:return r.sent()||f(c.type),[3,3];case 2:return(n=r.sent())===c.type&&f(n),o="No validation custom format found: ".concat(n),f(new Error(o)),[3,3];case 3:return[2]}var o}))}))},p=function(e,t,n){return s(void 0,void 0,void 0,(function(){var r,u;return l(this,(function(i){switch(i.label){case 0:return e.strict?(r=o.get(n.name))?(r(t)||f(c.type),[3,3]):[3,1]:[3,3];case 1:return[4,h(t,n)];case 2:i.sent(),i.label=3;case 3:return u=t,"Array"!==n.name?[3,4]:(u=t?n.from(t):t,[3,7]);case 4:return Object.prototype.hasOwnProperty.call(n,"__validate__")?[4,h(t,n)]:[3,6];case 5:return i.sent(),[3,7];case 6:u=t?n(t):t,i.label=7;case 7:return[2,u]}}))}))},d=function(e,t,n){return s(void 0,void 0,void 0,(function(){return l(this,(function(r){switch(r.label){case 0:return n.length||void 0===n.length||f(c.type),[4,u(n,(function(n){var r=n.value,o=n.len;return s(void 0,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:if(!(r instanceof Function))return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,p(e,t,r)];case 2:return[2,n.sent()];case 3:return n.sent(),[3,4];case 4:return[3,8];case 5:return t!==r?[3,6]:[2,t];case 6:return"object"==typeof r&&r?[4,u(r,(function(e){return e.value===t}))]:[3,8];case 7:if(n.sent())return[2,t];n.label=8;case 8:return 1===o&&f(c.type),[2]}}))}))}))];case 1:return[2,r.sent()]}}))}))},y=function(e,t){return s(void 0,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return[4,"object"==typeof(n=e.type)?d(e,t,n):p(e,t,n)];case 1:return[2,r.sent()]}}))}))},b=function(e,t,n){return s(void 0,void 0,void 0,(function(){var r,o;return l(this,(function(u){return r=null,o=i(n),e.length?r=e.length>=t:"Number"!==o&&"BigInt"!==o||(r=e>=t),(null===r||r)&&r||f(c.min),[2,r]}))}))},w=function(e,t,n){return s(void 0,void 0,void 0,(function(){var r,o;return l(this,(function(u){return r=null,o=i(n),e.length?r=e.length<=t:"Number"!==o&&"BigInt"!==o||(r=e<=t),(null===r||r)&&r||f(c.max),[2,r]}))}))},g=function(e,t){return s(void 0,void 0,void 0,(function(){return l(this,(function(n){return t.test(e)||f(c.regex),[2]}))}))};function m(e,t,n,r){return s(this,void 0,void 0,(function(){var o;return l(this,(function(u){switch(u.label){case 0:return o=e.required?e.required:!(!t&&!e.required),e.min&&o?[4,b(t,e.min,n).catch(r)]:[3,2];case 1:u.sent(),u.label=2;case 2:return e.max&&o?[4,w(t,e.max,n).catch(r)]:[3,4];case 3:u.sent(),u.label=4;case 4:return e.regex&&o?[4,g(t,e.regex).catch(r)]:[3,6];case 5:u.sent(),u.label=6;case 6:return[2,t]}}))}))}var x=function(e,t){return s(void 0,void 0,void 0,(function(){return l(this,(function(n){switch(n.label){case 0:return e.value&&e.value instanceof Function?[4,e.value(t)]:[3,2];case 1:return[2,n.sent()];case 2:return[2,void 0===e.value||t?t:e.value]}}))}))};function j(e,t){return s(this,void 0,void 0,(function(){var n,r,o;return l(this,(function(u){switch(u.label){case 0:return n=[],r=function(e){e in c?n.push(e):f(e)},[4,v(e.required,t).catch(r)];case 1:return u.sent(),[4,y(e,t).catch(r)];case 2:return o=u.sent(),n.length?[2,[o,n]]:[4,m(e,o,typeof o,r)];case 3:return[2,[u.sent(),n]]}}))}))}function _(e,t,n,r,o){return s(this,void 0,void 0,(function(){return l(this,(function(u){switch(u.label){case 0:return[4,j(n,r).then((function(u){var i=u[0],c=u[1];if(c.length){var a={error:c,target:n.target,value:r};t(a,o)}else e([n.target,i])}))];case 1:return u.sent(),[2]}}))}))}function O(e,t,n){return void 0===t&&(t={}),s(this,void 0,void 0,(function(){var r,o=this;return l(this,(function(i){switch(i.label){case 0:return r={_values:{},_errors:[],get values(){return this._values},resolution:function(e){var t=e[0],n=e[1];void 0!==n&&Object.defineProperty(r._values,t,{enumerable:!0,value:n})},callBackErr:function(e,t){r._errors.push(e),(n&&n.strictCycle&&"boolean"==typeof n.strictCycle||n&&n.strictCycle===t+1)&&f(r._errors)}},[4,u(e,(function(e){var n=e.value,u=e.index;return s(o,void 0,void 0,(function(){var e,o;return l(this,(function(i){switch(i.label){case 0:return e=function(e){return a({required:!0,strict:!0},e)}(n),[4,x(e,t[e.target])];case 1:return o=i.sent(),[4,_(r.resolution,r.callBackErr,e,o,u)];case 2:return i.sent(),[2]}}))}))}))];case 1:return i.sent(),[2,r._errors.length?f(r._errors):r.values]}}))}))}var k=function(){return k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k.apply(this,arguments)};const S=function(){function e(e,t){var n=null!=t?t:{},r=n.values,o=n.strictCycle;this.schemes=e,r&&(this.values=r),o&&(this.config={strictCycle:o})}return e.prototype.parser=function(e,t){return n=this,r=void 0,u=function(){return function(e,t){var n,r,o,u,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return u={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function c(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(n){return e&&(this.values=e),t&&(this.config=k(k({},this.config),{strictCycle:t})),[2,O(this.schemes,this.values,this.config)]}))},new((o=void 0)||(o=Promise))((function(e,t){function i(e){try{a(u.next(e))}catch(e){t(e)}}function c(e){try{a(u.throw(e))}catch(e){t(e)}}function a(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(i,c)}a((u=u.apply(n,r||[])).next())}));var n,r,o,u},e}();return t})()));
//# sourceMappingURL=index.umd.js.map